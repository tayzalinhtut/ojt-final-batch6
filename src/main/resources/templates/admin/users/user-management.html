<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head>

    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>OJT Members - OJT Management System</title>

    <link

            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"

            rel="stylesheet"

    />

    <link

            rel="stylesheet"

            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"

    />

    <style>

        /* Custom scrollbar for sidebar */

        .sidebar-scroll {

            height: calc(100vh - 120px); /* Adjust based on header/footer height */

            overflow-y: auto;

        }

        .sidebar-scroll::-webkit-scrollbar {

            width: 6px;

        }

        .sidebar-scroll::-webkit-scrollbar-track {

            background: #f1f1f1;

        }

        .sidebar-scroll::-webkit-scrollbar-thumb {

            background: #888;

            border-radius: 3px;

        }

        .sidebar-scroll::-webkit-scrollbar-thumb:hover {

            background: #555;

        }

    </style>

    <!-- DataTables CSS -->

    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" />



</head>



<body class="bg-light">

<div class="d-flex">

    <!-- Sidebar -->

    <nav

            class="bg-white shadow-sm position-fixed h-100 d-flex flex-column"

            style="width: 280px; z-index: 1000"

    >

        <!-- Sidebar Header -->

        <div class="p-4 border-bottom">

            <div class="d-flex align-items-center">

                <a th:href="@{/admin}" class="nav-link d-flex">

                    <div

                            class="bg-primary text-white rounded-3 d-flex align-items-center justify-content-center me-3"

                            style="width: 45px; height: 45px"

                    >

                        <i class="bi bi-mortarboard-fill fs-5"></i>

                    </div>

                    <div>

                        <h5 class="mb-0 fw-bold text-dark">OJT Management</h5>

                        <small class="text-muted">System</small>

                    </div>

                </a>

            </div>

        </div>

        <!-- Sidebar Menu -->

        <div class="sidebar-scroll flex-grow-1 p-3">

            <ul class="nav flex-column gap-1">

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/dashboard}"

                    >

                        <i class="bi bi-speedometer2 me-3 fs-5"></i>

                        <span class="fw-semibold">Dashboard</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link active bg-primary text-white d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/staff-members}"

                    >

                        <i class="bi bi-people me-3 fs-5"></i>

                        <span class="fw-semibold">User Management</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/batch-management}"

                    >

                        <i class="bi bi-collection me-3 fs-5"></i>

                        <span class="fw-semibold">Batch Management</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/courses}"

                    >

                        <i class="bi bi-box me-3 fs-5"></i>

                        <span class="fw-semibold">Course Management</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/candidate-management}"

                    >

                        <i class="bi bi-file-earmark-person me-3 fs-5"></i>

                        <span class="fw-semibold">CV Management</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/resources}"

                    >

                        <i class="bi bi-building me-3 fs-5"></i>

                        <span class="fw-semibold">Resources</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark rounded-3 d-flex align-items-center py-3 px-3"

                            th:href="@{/admin/member-profiles}"

                    >

                        <i class="bi bi-people me-3 fs-5"></i>

                        <span class="fw-semibold">OJT Management</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/submit-student-attendance}"

                    >

                        <i class="bi bi-calendar-check me-3 fs-5"></i>

                        <span class="fw-semibold">Attendance</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/evaluations}"

                    >

                        <i class="bi bi-clipboard-check me-3 fs-5"></i>

                        <span class="fw-semibold">Evaluations</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/completion-report}"

                    >

                        <i class="bi bi-award me-3 fs-5"></i>

                        <span class="fw-semibold">Completion Report</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/reports}"

                    >

                        <i class="bi bi-clipboard-data me-3 fs-5"></i>

                        <span class="fw-semibold">Reports & Analytics</span>

                    </a>

                </li>

                <li class="nav-item">

                    <a

                            class="nav-link text-dark d-flex align-items-center py-3 px-3 rounded-3"

                            th:href="@{/admin/email-notification}"

                    >

                        <i class="bi bi-envelope me-3 fs-5"></i>

                        <span class="fw-semibold">Emails</span>

                    </a>

                </li>

            </ul>

        </div>



        <!-- Sidebar Footer -->

        <div class="p-4 border-top">

            <div class="d-flex align-items-center">

                <div

                        class="bg-light rounded-circle d-flex align-items-center justify-content-center me-3"

                        style="width: 45px; height: 45px"

                >

                    <i class="bi bi-person-circle fs-4 text-muted"></i>

                </div>

                <div class="flex-grow-1">

                    <div class="fw-semibold text-dark" th:text="${currentUser}">

                        Admin User

                    </div>

                    <small class="text-muted">System Administrator</small>

                </div>

                <div class="dropdown">

                    <button

                            class="btn btn-link text-muted p-0"

                            data-bs-toggle="dropdown"

                    >

                        <i class="bi bi-three-dots-vertical"></i>

                    </button>

                    <ul class="dropdown-menu">

                        <li>

                            <a class="dropdown-item" th:href="@{/admin/profile}">Profile</a>

                        </li>



                        <li><hr class="dropdown-divider" /></li>

                        <li><a class="dropdown-item" th:href="@{/logout}">Logout</a></li>

                    </ul>

                </div>

            </div>

        </div>

    </nav>





    <!-- Main Content -->

    <div class="flex-grow-1" style="margin-left: 280px">

        <!-- Top Navigation -->

        <header class="bg-white shadow-sm border-bottom sticky-top">

            <div class="d-flex align-items-center justify-content-between p-4">

                <div class="d-flex align-items-center">

                    <h3 class="mb-0 fw-bold text-dark">User Management</h3>

                </div>

                <div class="d-flex align-items-center gap-3">

                    <div class="dropdown">

                        <button

                                class="btn btn-link text-muted p-2 position-relative"

                                data-bs-toggle="dropdown"

                        >

                            <i class="bi bi-bell fs-5"></i>

                            <span

                                    class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"

                                    style="font-size: 0.6rem"

                            >3</span

                            >

                        </button>

                        <ul class="dropdown-menu dropdown-menu-end">

                            <li>

                                <a class="dropdown-item" href="#">New evaluation pending</a>

                            </li>

                            <li>

                                <a class="dropdown-item" href="#">Interview scheduled</a>

                            </li>

                            <li>

                                <a class="dropdown-item" href="#">Offer response due</a>

                            </li>

                        </ul>

                    </div>

                </div>

            </div>

        </header>



        <div class="p-4">

            <!-- Filters and Search -->

            <div class="card border-0 shadow-sm mb-4">

                <div class="card-body">

                    <div class="row g-3 align-items-end">

                        <div class="col-md-6">

                            <div class="input-group">

 <span class="input-group-text bg-light border-end-0">

 <i class="bi bi-search text-muted"></i>

 </span>

                                <input

                                        type="text"

                                        class="form-control border-start-0 ps-0"

                                        placeholder="Search by name, email, or ID..."

                                        th:value="${searchQuery}"

                                />

                            </div>

                        </div>

                        <div class="col-md-4">

                            <select class="form-select">

                                <option value="">All Roles</option>

                                <option value="ADMIN">Admin</option>

                                <option value="TRAINER">Trainer</option>

                                <option value="STUDENT">Instructor</option>

                                <option value="INTERN">Operator</option>

                            </select>

                        </div>

                        <div class="col-md-2">

                            <button type="submit" class="btn btn-primary w-100">

                                <i class="bi bi-funnel me-2"></i>Apply Filters

                            </button>

                        </div>

                    </div>

                </div>

            </div>



            <form th:action="@{/admin/upload}" method="post" enctype="multipart/form-data">

                <div class="card border-0 shadow-sm mb-4">

                    <div class="card-body mt-3">

                        <div class="row g-3 align-items-end">

                            <div class="row align-items-center">

                                <div class="col-md-12">

                                    <div class="d-flex align-items-center gap-3">

 <span class="fw-semibold text-muted small"

 >IMPORT MEMBERS:</span

 >

                                        <div class="d-flex gap-2 flex-grow-1">

                                            <div class="position-relative flex-grow-1">

                                                <input

                                                        type="file"

                                                        class="form-control form-control-sm pe-5"

                                                        accept=".xlsx,.xls,.csv"

                                                        id="memberImport"

                                                        name="file"

                                                />

                                                <span

                                                        class="position-absolute end-0 top-50 translate-middle-y me-2 small text-muted"

                                                >

 <i class="bi bi-file-earmark-spreadsheet"></i>

 </span>

                                            </div>

                                            <button class="btn btn-primary btn-sm px-3">

                                                <i class="bi bi-upload me-2"></i>Upload

                                            </button>

                                        </div>

                                    </div>

                                </div>

                            </div>

                        </div>

                    </div>

                </div>

            </form>



            <div class="card border-0 shadow-sm">

                <div

                        class="card-header bg-white border-bottom d-flex align-items-center justify-content-between py-3"

                >

                    <h5 class="fw-bold mb-0">User List</h5>

                    <a th:href="@{/admin/add-staff-member}" class="btn btn-primary btn-sm">

                        <i class="bi bi-plus-lg me-1"></i>Add New

                    </a>

                </div>



                <div class="card-body">

                    <div class="table-responsive">

                        <table id="userTable" class="table table-hover align-middle">

                            <thead>

                            <tr>

                                <th>ID</th>

                                <th>User</th>

                                <th>Email</th>

                                <th>Role</th>

                                <th>Status</th>

                                <th class="text-end">Actions</th>

                            </tr>

                            </thead>



                            <tbody>

                            <tr th:each="member : ${userList}">

                                <td class="fw-semibold" th:text="${member.user_id}">#101</td>

                                <td>

                                    <div class="d-flex align-items-center">

                                        <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center me-2"

                                             style="width: 36px; height: 36px">

                                            <span th:text="${member.name.substring(0, 1)}">A</span>

                                        </div>

                                        <div>

                                            <div class="fw-semibold" th:text="${member.name}">Alice Johnson</div>

                                        </div>

                                    </div>

                                </td>

                                <td th:text="${member.email}">alicejohnson@gmail.com</td>

                                <td>

 <span class="badge bg-primary bg-opacity-10 text-primary"

       th:text="${member.role[0].name}">ADMIN</span>

                                </td>

                                <td>

 <span class="badge bg-success bg-opacity-10 text-success status-badge"

       th:text="${member.status.statusType}">Active</span>

                                </td>

                                <td class="text-end">

                                    <div class="d-flex justify-content-end gap-2">

                                        <a th:href="@{/admin/view-user-profile/{id}(id=${member.user_id})}"

                                           class="btn btn-sm btn-outline-info action-btn"

                                           data-bs-toggle="tooltip" data-bs-title="View">

                                            <i class="bi bi-eye"></i>

                                        </a>

                                        <a th:href="@{/admin/edit-staff-member/{id}(id=${member.user_id})}"

                                           class="btn btn-sm btn-outline-warning action-btn"

                                           data-bs-toggle="tooltip" data-bs-title="Edit">

                                            <i class="bi bi-pencil"></i>

                                        </a>

                                        <form th:action="@{/admin/delete-staff-member/{id}(id=${member.user_id})}" method="POST" style="display: inline;">

                                            <button type="submit" class="btn btn-sm btn-outline-danger action-btn"

                                                    data-bs-toggle="tooltip" data-bs-title="Delete"

                                                    onclick="return confirm('Are you sure you want to delete this user?');">

                                                <i class="bi bi-trash"></i>

                                            </button>

                                        </form>

                                    </div>

                                </td>

                            </tr>

                            </tbody>

                        </table>

                    </div>







                    <nav>

                        <ul class="pagination mb-0">

                            <li class="page-item disabled">

                                <a class="page-link">

                                    <i class="bi bi-chevron-left"></i>

                                </a>

                            </li>

                            <li class="page-item active">

                                <a class="page-link">1</a>

                            </li>

                            <li class="page-item">

                                <a class="page-link">2</a>

                            </li>

                            <li class="page-item">

                                <a class="page-link">3</a>

                            </li>

                            <li class="page-item">

                                <a class="page-link">

                                    <i class="bi bi-chevron-right"></i>

                                </a>

                            </li>

                        </ul>

                    </nav>

                </div>

            </div>

        </div>

    </div>

</div>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>

    // Enable tooltips

    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));

    tooltipTriggerList.map(function (tooltipTriggerEl) {

        return new bootstrap.Tooltip(tooltipTriggerEl);

    });

</script>

<!-- jQuery and DataTables JS -->

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<script>

    $(document).ready(function () {

        const table = $('#userTable').DataTable({

            initComplete: function () {

                this.api()

                    .columns([0, 1, 2, 3, 4]) // Columns: ID, Name, Email, Role, Status

                    .every(function () {

                        const column = this;

                        const input = $('<input type="text" placeholder="Search..." class="form-control form-control-sm mb-2" />')

                            .appendTo($(column.header()).empty())

                            .on('keyup change clear', function () {

                                if (column.search() !== this.value) {

                                    column.search(this.value).draw();

                                }

                            });

                    });

            },

        });

    });

</script>



</div>

</body>

</html>